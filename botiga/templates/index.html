{% extends 'layouts/base.html' %}

{% block content %}
<h1>Productos Disponibles</h1>

<!-- üè† Breadcrumb de navegaci√≥n -->
<div>
    <h3>Ruta de categor√≠as:</h3>
    <ul>
        <!-- <li><a href="{% url 'home' %}">Home</a></li> -->
        {% for cat in catAcumulades %}
            <ol><a href="{% url 'category_filter' cat.id %}">{{ cat.nom_cat }}</a>></ol>
        {% endfor %}
    </ul>
</div>

<!-- üîπ Seleccionar subcategor√≠a -->
{% if subcategories %}
<div>
    <h3>Selecciona una subcategor√≠a:</h3>
    <ul>
        {% for sub in subcategories %}
            <li><a href="{% url 'category_filter' sub.id %}">{{ sub.nom_cat }}</a></li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<!-- üì¶ Lista de productos -->
<div class="product-list">
    {% if products %}
        {% for product in products %}
            <div class="product-card">
                <h3>{{ product.nom_prod }}</h3>
                <a href="{% url 'product_detail' product.id %}">                    {{ product.nom_prod }}
                </a></li>
                                <p>{{ product.descripcio }}</p>
            
                <ul>
                    {% for variant in product.variant_set.all %}
                        <li>{{ variant.color }} - {{ variant.preu }}‚Ç¨</li>
                    {% endfor %}
                </ul> 

                <p>Tallas disponibles:</p>
                <ul>
                    {% for variant in product.variant_set.all %}
                    {% for stock in variant.stock_set.all %}
                        <li>{{ stock.talla.n_talla }}</li>
                    {% endfor %}
                    {% endfor %}
                
                </ul>
            </div>
        {% endfor %}
    {% else %}
        <p>No hay productos en esta categor√≠a.</p>
    {% endif %}
</div>

{% endblock %}
